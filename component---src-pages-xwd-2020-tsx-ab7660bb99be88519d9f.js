"use strict";(self.webpackChunkxwds=self.webpackChunkxwds||[]).push([[841],{9406:function(e,t,l){l.r(t);var n=l(6540),c=l(4794),o=l(9914),s=l(7528),r=l(4050),i=l(2988);t.default=()=>{const e=(0,c.useStaticQuery)("2069107878").allXwd2020Json.edges[0].node,t=e.title,l=e.preamble,u=e.across_size,a=e.down_size,d=e.black_squares,f=e.clues,h={ac:{},dn:{}};f.ac.forEach((e=>{h.ac[e.number]=[e.clue,e.length,e.date]})),f.dn.forEach((e=>{h.dn[e.number]=[e.clue,e.length,e.date]}));const C=d.map((e=>{let[t,l]=e;return new i.Uc(t,l)}));return n.createElement(o.A,null,n.createElement(s.A,{title:"Crosswords",keywords:["gatsby","application","react"]}),n.createElement(r.ZJ,{title:t,preamble:l,blackCells:C,h:u,v:a,clues:h}))}},4050:function(e,t,l){l.d(t,{ZJ:function(){return i}});var n=l(6540),c=l(2988);function o(e){return n.createElement("div",{style:{position:"absolute",width:e.h+1+"px",height:e.v+1+"px",top:e.y+"px",left:e.x+"px"},className:"black-cell"})}function s(e){const{0:t,1:l}=(0,n.useState)("");let o=e.selected?"cyan":e.highlight?"lightblue":"lightgray";return n.createElement(n.Fragment,null,n.createElement("input",{style:{position:"absolute",width:e.h-1+"px",height:e.v-1+"px",top:e.y+"px",left:e.x+"px",backgroundColor:o},ref:t=>t&&e.selected&&t.focus(),onClick:e.onClick,className:"white-cell",type:"text",onKeyUp:t=>{console.log("pressed "+t.key),t.key.match(/^[a-z]$/i)?(l(t.key),e.selectNextCell()):"Backspace"===t.key?(l(""),e.selectNextCell(!1)):"Delete"===t.key?l(""):"Tab"===t.key?e.selectNextClue():"ArrowUp"===t.key?e.moveCell(c.UP):"ArrowDown"===t.key?e.moveCell(c.PX):"ArrowLeft"===t.key?e.moveCell(c.M3):"ArrowRight"===t.key&&e.moveCell(c.NS)},value:t}),n.createElement("div",{className:"clue-number",style:{position:"absolute",width:e.h-1+"px",height:e.v-1+"px",top:e.y+"px",left:e.x+2+"px"}},e.number))}function r(e){let t="No clue selected.";if(null!==e.clue){const{num:l,direction:n,clue:c,letters:o,releaseDate:s}=e.clue,r=new Date;t=`${l} ${n}. ${11===r.getMonth()&&r.getDate()>s?c:`Released on December ${s}.`} (${o})`}return n.createElement("div",{style:{padding:"15px"}},n.createElement("span",{style:{fontWeight:"bold",padding:"5px",margin:"5px",backgroundColor:"lightblue"}},t))}function i(e){const{0:t,1:l}=(0,n.useState)(null),{0:o,1:s}=(0,n.useState)(null),{0:i,1:d}=(0,n.useState)(null),[f,h]=(0,c.tw)(e.v,e.h,e.blackCells),C=(0,c.Z5)(e.h,e.v,f);if(null!=t)for(const[n,r]of Object.entries(C[t.direction])){const[l,i,u]=e.clues[r.direction][n],a=new c.EA(n,r.direction,l,i,u);r.equals(t)&&!a.equals(o)&&s(a)}function g(e,t){console.log(`crossword onClick() ${t} ${e}`);const n=C[t][e];l(n),d(new c.Uc(n.x,n.y))}return n.createElement(n.Fragment,null,n.createElement("h1",null,e.title),n.createElement("p",null,e.preamble),n.createElement(r,{clue:o}),n.createElement("div",{style:{margin:"5px"},id:"xwd-container"},n.createElement(u,{blackCells:e.blackCells,whiteCells:f,cells:h,h:e.h,v:e.h,clues:C,selectedClue:t,setSelectedClue:l,selectedCell:i,setSelectedCell:d})),n.createElement(a,{direction:c.AC,clues:e.clues[c.AC],onClick:g,selectedClue:o}),n.createElement(a,{direction:c.DN,clues:e.clues[c.DN],onClick:g,selectedClue:o}))}function u(e){const t={};for(let[n,o]of Object.entries(e.clues[c.AC]))t[n]=new c.Uc(o.x,o.y);for(let[n,o]of Object.entries(e.clues[c.DN]))t[n]=new c.Uc(o.x,o.y);function l(t){if(console.log("just clicked"),console.log(t),t.x<0||t.x>=e.h||t.y<0||t.y>=e.v)return;if(function(t){for(let l=0;l<e.blackCells.length;l++){const n=e.blackCells[l];if(t.x===n.x&&t.y===n.y)return!0}return!1}(t))return;e.setSelectedCell(t);let l=!1;for(const c of e.whiteCells)t.equals(c)&&(l=!0);if(!l)return;let n=null,o=null;for(let s of Object.values(e.clues[c.AC]))if((0,c.LY)(s,t)){if(n=s,e.selectedClue&&!e.selectedClue.equals(n))return console.log("setiting selected clue to"),console.log(n),void e.setSelectedClue(n);break}for(let s of Object.values(e.clues[c.DN]))if((0,c.LY)(s,t))return o=s,console.log("setiting selected clue to"),console.log(o),void e.setSelectedClue(o)}function r(t){void 0===t&&(t=!0);const{x:l,y:n}=e.selectedCell;e.selectedClue.direction===c.AC&&(t&&l!==e.selectedClue.x+e.selectedClue.length-1?e.setSelectedCell(new c.Uc(l+1,n)):t||l===e.selectedClue.x||e.setSelectedCell(new c.Uc(l-1,n))),e.selectedClue.direction===c.DN&&(t&&n!==e.selectedClue.y+e.selectedClue.length-1?e.setSelectedCell(new c.Uc(l,n+1)):t||n===e.selectedClue.y||e.setSelectedCell(new c.Uc(l,n-1)))}function i(t){t===c.UP?l(e.selectedCell.nextCell(c.DN,!1)):t===c.PX?l(e.selectedCell.nextCell(c.DN,!0)):t===c.M3?l(e.selectedCell.nextCell(c.AC,!1)):t===c.NS&&l(e.selectedCell.nextCell(c.AC,!0))}function u(){console.log("select next clue"),console.log(e.selectedClue.direction);const t=Object.values(e.clues[e.selectedClue.direction]),l=e.selectedClue.direction===c.AC?c.DN:c.AC,n=Object.values(e.clues[l]);console.log(l);for(let o=0;o<t.length;o++)if(console.log("sel"),console.log(e.selectedClue),console.log("iter"),console.log(t[o]),e.selectedClue.equals(t[o])){let l;o!==t.length-1?(console.log("setting 1"),l=t[o+1]):(console.log("setting 2"),l=n[0]),e.setSelectedClue(l);const s=new c.Uc(l.x,l.y);e.setSelectedCell(s);break}}let a=[];if(null!=e.selectedClue){const{x:t,y:l,length:n,direction:o}=e.selectedClue;if(console.log(t),console.log(l),console.log(n),console.log(o),o==c.AC)for(let e=t;e<t+n;e++)a.push(new c.Uc(e,l));else for(let e=l;e<l+n;e++)a.push(new c.Uc(t,e))}console.log(t),console.log("highlights"),console.log(a);for(let n=0;n<e.cells.length;n++){const[l,c]=e.cells[n];let o=null;for(let[e,n]of Object.entries(t))n.x===l&&n.y===c&&(o=e);e.cells[n].push(o);let s=!1;for(let e=0;e<a.length;e++)l===a[e].x&&c===a[e].y&&(s=!0);e.cells[n].push(s)}return console.log(e.cells),n.createElement("div",{style:{position:"relative",width:30*e.h+"px",height:30*e.v+"px"}},e.cells.map((t=>{let[a,d,f,h,C]=t;return f?n.createElement(o,{h:30,v:30,x:30*a,y:30*d,key:a+e.h*d}):n.createElement(s,{h:30,v:30,x:30*a,y:30*d,key:a+e.h*d,number:h,highlight:C,selected:null!==e.selectedCell&&a===e.selectedCell.x&&d===e.selectedCell.y,onClick:e=>l(new c.Uc(a,d)),selectNextCell:r,selectNextClue:u,moveCell:i})})))}function a(e){let t=null,l=null;return null!==e.selectedClue&&(t=e.selectedClue.num,l=e.selectedClue.direction),n.createElement("div",{style:{fontWeight:"bold",width:"300px",display:"inline-block",verticalAlign:"top",margin:"5px"}},n.createElement("div",{style:{border:"1px solid black",padding:"5px"}},c.tN[e.direction]),Object.entries(e.clues).map((c=>{const[o,s]=c,r=e.direction===l&&o===t,[i,u,a]=s,f=new Date,h=11===f.getMonth()&&f.getDate()>a?i:`Released on December ${a}.`;return n.createElement(d,{number:o,clue:h,len:u,onClick:function(){!function(t){e.onClick(t,e.direction)}(o)},selected:r})})))}function d(e){let t="clue";return e.selected&&(t=`${t} selected`),n.createElement("div",{className:t,onClick:e.onClick},e.number,". ",e.clue," (",e.len,")")}},2988:function(e,t,l){l.d(t,{AC:function(){return n},DN:function(){return c},EA:function(){return f},LY:function(){return C},M3:function(){return r},NS:function(){return i},PX:function(){return s},UP:function(){return o},Uc:function(){return a},Z5:function(){return x},tN:function(){return u},tw:function(){return g}});const n="ac",c="dn",o="up",s="down",r="left",i="right",u={ac:"Across",dn:"Down"};let a=function(){function e(e,t){this.x=e,this.y=t}var t=e.prototype;return t.equals=function(e){return null!==e&&this.x===e.x&&this.y===e.y},t.nextCell=function(t,l){void 0===l&&(l=!0);const c=l?1:-1;return t===n?new e(this.x+c,this.y):new e(this.x,this.y+c)},e}(),d=function(){function e(e,t,l,n){this.x=e,this.y=t,this.length=l,this.direction=n}return e.prototype.equals=function(e){return null!==e&&this.x===e.x&&this.y===e.y&&this.length===e.length&&this.direction===e.direction},e}(),f=function(){function e(e,t,l,n,c){this.num=e,this.direction=t,this.clue=l,this.letters=n,this.releaseDate=c}return e.prototype.equals=function(e){return null!==e&&this.num===e.num&&this.direction===e.direction},e}();function h(e,t){for(var l=0;l<e.length;l++){const{x:n,y:c}=e[l];if(n===t.x&&c===t.y)return!0}return!1}function C(e,t){if(e.direction===n)for(var l=e.x;l<e.x+e.length;l++)if(t.x===l&&t.y===e.y)return!0;if(e.direction===c)for(l=e.y;l<e.y+e.length;l++)if(t.x==e.x&&t.y==l)return!0;return!1}function g(e,t,l){const n=[],c=[];for(let s=0;s<e;s++)for(let e=0;e<t;e++){let t=!1;for(var o=0;o<l.length;o++){const n=l[o];n.x===s&&n.y===e&&(t=!0)}t||c.push(new a(s,e)),n.push([s,e,t])}return[c,n]}function x(e,t,l){for(var o=[],s=[],r=1,i=0;i<t;i++)for(var u=0;u<e;u++){var f=0,C=0;if(h(l,new a(u,i))){if(0===u||!h(l,new a(u-1,i))){f=1;for(var g=u+1;g<e&&h(l,new a(g,i));g++)f+=1;f>1&&(o[r]=new d(u,i,f,n))}if(0===i||!h(l,new a(u,i-1))){C=1;for(var x=i+1;x<t&&h(l,new a(u,x));x++)C+=1;C>1&&(s[r]=new d(u,i,C,c))}(f>1||C>1)&&(r+=1)}}return{ac:o,dn:s}}}}]);
//# sourceMappingURL=component---src-pages-xwd-2020-tsx-ab7660bb99be88519d9f.js.map