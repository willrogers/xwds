(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"PZd/":function(e,t,l){var n=l("P8UN"),r=l("ys0W")(!0);n(n.S,"Object",{entries:function(e){return r(e)}})},cxuS:function(e,t,l){var n=l("P8UN"),r=l("ys0W")(!1);n(n.S,"Object",{values:function(e){return r(e)}})},v0Fs:function(e,t,l){"use strict";l.r(t);var n=l("q1tI"),r=l.n(n),o=l("Bl7J"),c=l("vrFN"),s=(l("m210"),l("4DPX"),l("YbXK"),l("cFtU"),l("pJf4"),l("q8oJ"),l("cxuS"),l("rzGZ"),l("Dq+y"),l("8npG"),l("PZd/"),l("Ll4R"),"ac"),i="dn",u={ac:"Across",dn:"Down"},a=function(){function e(e,t){this.x=e,this.y=t}var t=e.prototype;return t.equals=function(e){return null!==e&&this.x===e.x&&this.y===e.y},t.nextCell=function(t,l){void 0===l&&(l=!0);var n=l?1:-1;return t===s?new e(this.x+n,this.y):new e(this.x,this.y+n)},e}(),d=function(){function e(e,t,l,n){this.x=e,this.y=t,this.length=l,this.direction=n}return e.prototype.equals=function(e){return null!==e&&this.x===e.x&&this.y===e.y&&this.length===e.length&&this.direction===e.direction},e}(),f=function(){function e(e,t,l,n,r){this.num=e,this.direction=t,this.clue=l,this.letters=n,this.releaseDate=r}return e.prototype.equals=function(e){return null!==e&&this.num===e.num&&this.direction===e.direction},e}();function h(e,t){for(var l=0;l<e.length;l++){var n=e[l],r=n.x,o=n.y;if(r===t.x&&o===t.y)return!0}return!1}function v(e,t){if(e.direction===s)for(var l=e.x;l<e.x+e.length;l++)if(t.x===l&&t.y===e.y)return!0;if(e.direction===i)for(l=e.y;l<e.y+e.length;l++)if(t.x==e.x&&t.y==l)return!0;return!1}function g(e,t){var l;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(l=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var l=Object.prototype.toString.call(e).slice(8,-1);"Object"===l&&e.constructor&&(l=e.constructor.name);if("Map"===l||"Set"===l)return Array.from(e);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){l&&(e=l);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(l=e[Symbol.iterator]()).next.bind(l)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var l=0,n=new Array(t);l<t;l++)n[l]=e[l];return n}function C(e){return r.a.createElement("div",{style:{position:"absolute",width:e.h+1+"px",height:e.v+1+"px",top:e.y+"px",left:e.x+"px"},className:"black-cell"})}function x(e){var t=Object(n.useState)(""),l=t[0],o=t[1],c=e.selected?"cyan":e.highlight?"lightblue":"lightgray";return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{style:{position:"absolute",width:e.h-1+"px",height:e.v-1+"px",top:e.y+"px",left:e.x+"px",backgroundColor:c},ref:function(t){return t&&e.selected&&t.focus()},onClick:e.onClick,className:"white-cell",type:"text",onKeyUp:function(t){console.log("pressed "+t.key),t.key.match(/^[a-z]$/i)?(o(t.key),e.selectNextCell()):"Backspace"===t.key?(o(""),e.selectNextCell(!1)):"Delete"===t.key?o(""):"Tab"===t.key?e.selectNextClue():"ArrowUp"===t.key?e.moveCell("up"):"ArrowDown"===t.key?e.moveCell("down"):"ArrowLeft"===t.key?e.moveCell("left"):"ArrowRight"===t.key&&e.moveCell("right")},value:l}),r.a.createElement("div",{className:"clue-number",style:{position:"absolute",width:e.h-1+"px",height:e.v-1+"px",top:e.y+"px",left:e.x+2+"px"}},e.number))}function p(e){var t="No clue selected.";if(null!==e.clue){var l=e.clue;t=l.num+" "+l.direction+". "+l.clue}return r.a.createElement(r.a.Fragment,null,t)}function m(e){var t=Object(n.useState)(null),l=t[0],o=t[1],c=Object(n.useState)(null),u=c[0],v=c[1],g=Object(n.useState)(null),y=g[0],C=g[1];console.log("selected clue then clueSeq"),console.log(u),console.log(l);var x=function(e,t,l){for(var n=[],r=[],o=0;o<e;o++)for(var c=0;c<t;c++){for(var s=!1,i=0;i<l.length;i++){var u=l[i];u.x===o&&u.y===c&&(s=!0)}s||r.push(new a(o,c)),n.push([o,c,s])}return[r,n]}(e.v,e.h,e.blackCells),m=x[0],k=x[1],S=function(e,t,l){for(var n=[],r=[],o=1,c=0;c<t;c++)for(var u=0;u<e;u++){var f=0,v=0;if(h(l,new a(u,c))){if(0===u||!h(l,new a(u-1,c))){f=1;for(var g=u+1;g<e&&h(l,new a(g,c));g++)f+=1;f>1&&(n[o]=new d(u,c,f,s))}if(0===c||!h(l,new a(u,c-1))){v=1;for(var y=c+1;y<t&&h(l,new a(u,y));y++)v+=1;v>1&&(r[o]=new d(u,c,v,i))}(f>1||v>1)&&(o+=1)}}return{ac:n,dn:r}}(e.h,e.v,m);if(null!=l)for(var j=0,E=Object.entries(S[l.direction]);j<E.length;j++){var O=E[j],q=O[0],N=O[1],A=e.clues[N.direction][q],F=A[0],D=A[1],J=A[2],P=new f(q,N.direction,F,D,J);N.equals(l)&&!P.equals(u)&&v(P)}function U(e,t){console.log("crossword onClick() "+t+" "+e);var l=S[t][e];o(l),C(new a(l.x,l.y))}return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"A crossword"),r.a.createElement("p",null,"First crossword."),r.a.createElement(p,{clue:u}),r.a.createElement("div",{id:"xwd-container"},r.a.createElement(b,{blackCells:e.blackCells,whiteCells:m,cells:k,h:e.h,v:e.h,clues:S,selectedClue:l,setSelectedClue:o,selectedCell:y,setSelectedCell:C})),r.a.createElement(w,{direction:s,clues:e.clues.ac,onClick:U,selectedClue:u}),r.a.createElement(w,{direction:i,clues:e.clues.dn,onClick:U,selectedClue:u}))}function b(e){for(var t={},l=0,n=Object.entries(e.clues.ac);l<n.length;l++){var o=n[l],c=o[0],u=o[1];t[c]=new a(u.x,u.y)}for(var d=0,f=Object.entries(e.clues.dn);d<f.length;d++){var h=f[d],y=h[0],p=h[1];t[y]=new a(p.x,p.y)}function m(t){if(console.log("just clicked"),console.log(t),!(t.x<0||t.x>=e.h||t.y<0||t.y>=e.v||function(t){for(var l=0;l<e.blackCells.length;l++){var n=e.blackCells[l];if(t.x===n.x&&t.y===n.y)return!0}return!1}(t))){e.setSelectedCell(t);for(var l,n=!1,r=g(e.whiteCells);!(l=r()).done;){var o=l.value;t.equals(o)&&(n=!0)}if(n){for(var c=null,s=null,i=0,u=Object.values(e.clues.ac);i<u.length;i++){var a=u[i];if(v(a,t)){if(c=a,e.selectedClue&&!e.selectedClue.equals(c))return console.log("setiting selected clue to"),console.log(c),void e.setSelectedClue(c);break}}for(var d=0,f=Object.values(e.clues.dn);d<f.length;d++){var h=f[d];if(v(h,t))return s=h,console.log("setiting selected clue to"),console.log(s),void e.setSelectedClue(s)}}}}function b(t){void 0===t&&(t=!0);var l=e.selectedCell,n=l.x,r=l.y;e.selectedClue.direction===s&&(t&&n!==e.selectedClue.x+e.selectedClue.length-1?e.setSelectedCell(new a(n+1,r)):t||n===e.selectedClue.x||e.setSelectedCell(new a(n-1,r))),e.selectedClue.direction===i&&(t&&r!==e.selectedClue.y+e.selectedClue.length-1?e.setSelectedCell(new a(n,r+1)):t||r===e.selectedClue.y||e.setSelectedCell(new a(n,r-1)))}function w(t){"up"===t?m(e.selectedCell.nextCell(i,!1)):"down"===t?m(e.selectedCell.nextCell(i,!0)):"left"===t?m(e.selectedCell.nextCell(s,!1)):"right"===t&&m(e.selectedCell.nextCell(s,!0))}function k(){console.log("select next clue"),console.log(e.selectedClue.direction);var t=Object.values(e.clues[e.selectedClue.direction]),l=e.selectedClue.direction===s?i:s,n=Object.values(e.clues[l]);console.log(l);for(var r=0;r<t.length;r++)if(console.log("sel"),console.log(e.selectedClue),console.log("iter"),console.log(t[r]),e.selectedClue.equals(t[r])){var o=void 0;r!==t.length-1?(console.log("setting 1"),o=t[r+1]):(console.log("setting 2"),o=n[0]),e.setSelectedClue(o);var c=new a(o.x,o.y);e.setSelectedCell(c);break}}var S=[];if(null!=e.selectedClue){var j=e.selectedClue,E=j.x,O=j.y,q=j.length,N=j.direction;if(console.log(E),console.log(O),console.log(q),console.log(N),N==s)for(var A=E;A<E+q;A++)S.push(new a(A,O));else for(var F=O;F<O+q;F++)S.push(new a(E,F))}console.log(t),console.log("highlights"),console.log(S);for(var D=0;D<e.cells.length;D++){for(var J=e.cells[D],P=J[0],U=J[1],z=null,B=0,I=Object.entries(t);B<I.length;B++){var W=I[B],K=W[0],X=W[1];X.x===P&&X.y===U&&(z=K)}e.cells[D].push(z);for(var Z=!1,G=0;G<S.length;G++)P===S[G].x&&U===S[G].y&&(Z=!0);e.cells[D].push(Z)}return console.log(e.cells),r.a.createElement("div",{style:{position:"relative",width:30*e.h+"px",height:30*e.v+"px"}},e.cells.map((function(t){var l=t[0],n=t[1],o=t[2],c=t[3],s=t[4];return o?r.a.createElement(C,{h:30,v:30,x:30*l,y:30*n,key:l+e.h*n}):r.a.createElement(x,{h:30,v:30,x:30*l,y:30*n,key:l+e.h*n,number:c,highlight:s,selected:null!==e.selectedCell&&l===e.selectedCell.x&&n===e.selectedCell.y,onClick:function(e){return m(new a(l,n))},selectNextCell:b,selectNextClue:k,moveCell:w})})))}function w(e){var t=null,l=null;return null!==e.selectedClue&&(t=e.selectedClue.num,l=e.selectedClue.direction),r.a.createElement("div",{style:{fontWeight:"bold"}},u[e.direction],Object.entries(e.clues).map((function(n){var o=n[0],c=n[1],s=e.direction===l&&o===t,i=c[0],u=c[1];return r.a.createElement(k,{number:o,clue:i,len:u,onClick:function(){!function(t){e.onClick(t,e.direction)}(o)},selected:s})})))}function k(e){var t="clue";return e.selected&&(t+=" selected"),r.a.createElement("div",{className:t,onClick:e.onClick},e.number,". ",e.clue," (",e.len,")")}t.default=function(){var e=Object(n.useState)([]),t=e[0],l=e[1],s=Object(n.useState)(0),i=s[0],u=s[1],d=Object(n.useState)(0),f=d[0],h=d[1],v=Object(n.useState)({ac:[],dn:[]}),g=v[0],y=v[1];0===t.length&&fetch("/xwd2019.json").then((function(e){return console.log(e),e.json()})).then((function(e){l(e["black-squares"]),u(e["across-size"]),h(e["down-size"]),y(e.clues)})),console.log("props"),console.log(g.ac),console.log(t),console.log(i),console.log(f);var C=t.map((function(e){var t=e[0],l=e[1];return new a(t,l)}));return r.a.createElement(o.a,null,r.a.createElement(c.a,{title:"Crosswords",keywords:["gatsby","application","react"]}),r.a.createElement(m,{blackCells:C,h:i,v:f,clues:g}))}},ys0W:function(e,t,l){var n=l("QPJK"),r=l("2mBY"),o=l("5SQf"),c=l("BnbX").f;e.exports=function(e){return function(t){for(var l,s=o(t),i=r(s),u=i.length,a=0,d=[];u>a;)l=i[a++],n&&!c.call(s,l)||d.push(e?[l,s[l]]:s[l]);return d}}}}]);
//# sourceMappingURL=component---src-pages-xwd-js-1589a58ae65c35365ace.js.map