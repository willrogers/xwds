(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{dvtb:function(e,t,l){"use strict";l.r(t);var n=l("q1tI"),r=l.n(n),c=l("Wbzz"),o=l("Bl7J"),i=l("vrFN"),s="ac",a="dn",u={ac:"Across",dn:"Down"},d=function(){function e(e,t){this.x=e,this.y=t}var t=e.prototype;return t.equals=function(e){return null!==e&&this.x===e.x&&this.y===e.y},t.nextCell=function(t,l){void 0===l&&(l=!0);var n=l?1:-1;return t===s?new e(this.x+n,this.y):new e(this.x,this.y+n)},e}(),h=function(){function e(e,t,l,n){this.x=e,this.y=t,this.length=l,this.direction=n}return e.prototype.equals=function(e){return null!==e&&this.x===e.x&&this.y===e.y&&this.length===e.length&&this.direction===e.direction},e}(),f=function(){function e(e,t,l,n,r){this.num=e,this.direction=t,this.clue=l,this.letters=n,this.releaseDate=r}return e.prototype.equals=function(e){return null!==e&&this.num===e.num&&this.direction===e.direction},e}();function v(e,t){for(var l=0;l<e.length;l++){var n=e[l],r=n.x,c=n.y;if(r===t.x&&c===t.y)return!0}return!1}function g(e,t){if(e.direction===s)for(var l=e.x;l<e.x+e.length;l++)if(t.x===l&&t.y===e.y)return!0;if(e.direction===a)for(l=e.y;l<e.y+e.length;l++)if(t.x==e.x&&t.y==l)return!0;return!1}function y(e,t){var l;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(l=function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var l=Object.prototype.toString.call(e).slice(8,-1);"Object"===l&&e.constructor&&(l=e.constructor.name);if("Map"===l||"Set"===l)return Array.from(e);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return C(e,t)}(e))||t&&e&&"number"==typeof e.length){l&&(e=l);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(l=e[Symbol.iterator]()).next.bind(l)}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var l=0,n=new Array(t);l<t;l++)n[l]=e[l];return n}function p(e){return r.a.createElement("div",{style:{position:"absolute",width:e.h+1+"px",height:e.v+1+"px",top:e.y+"px",left:e.x+"px"},className:"black-cell"})}function x(e){var t=Object(n.useState)(""),l=t[0],c=t[1],o=e.selected?"cyan":e.highlight?"lightblue":"lightgray";return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{style:{position:"absolute",width:e.h-1+"px",height:e.v-1+"px",top:e.y+"px",left:e.x+"px",backgroundColor:o},ref:function(t){return t&&e.selected&&t.focus()},onClick:e.onClick,className:"white-cell",type:"text",onKeyUp:function(t){console.log("pressed "+t.key),t.key.match(/^[a-z]$/i)?(c(t.key),e.selectNextCell()):"Backspace"===t.key?(c(""),e.selectNextCell(!1)):"Delete"===t.key?c(""):"Tab"===t.key?e.selectNextClue():"ArrowUp"===t.key?e.moveCell("up"):"ArrowDown"===t.key?e.moveCell("down"):"ArrowLeft"===t.key?e.moveCell("left"):"ArrowRight"===t.key&&e.moveCell("right")},value:l}),r.a.createElement("div",{className:"clue-number",style:{position:"absolute",width:e.h-1+"px",height:e.v-1+"px",top:e.y+"px",left:e.x+2+"px"}},e.number))}function m(e){var t="No clue selected.";if(null!==e.clue){var l=e.clue,n=l.num,c=l.direction,o=l.clue,i=l.letters,s=l.releaseDate,a=new Date;t=n+" "+c+". "+(11===a.getMonth()&&a.getDate()>s?o:"Released on December "+s+".")+" ("+i+")"}return r.a.createElement("div",{style:{padding:"15px"}},r.a.createElement("span",{style:{fontWeight:"bold",padding:"5px",margin:"5px",backgroundColor:"lightblue"}},t))}function b(e){var t=Object(n.useState)(null),l=t[0],c=t[1],o=Object(n.useState)(null),i=o[0],u=o[1],g=Object(n.useState)(null),y=g[0],C=g[1],p=function(e,t,l){for(var n=[],r=[],c=0;c<e;c++)for(var o=0;o<t;o++){for(var i=!1,s=0;s<l.length;s++){var a=l[s];a.x===c&&a.y===o&&(i=!0)}i||r.push(new d(c,o)),n.push([c,o,i])}return[r,n]}(e.v,e.h,e.blackCells),x=p[0],b=p[1],E=function(e,t,l){for(var n=[],r=[],c=1,o=0;o<t;o++)for(var i=0;i<e;i++){var u=0,f=0;if(v(l,new d(i,o))){if(0===i||!v(l,new d(i-1,o))){u=1;for(var g=i+1;g<e&&v(l,new d(g,o));g++)u+=1;u>1&&(n[c]=new h(i,o,u,s))}if(0===o||!v(l,new d(i,o-1))){f=1;for(var y=o+1;y<t&&v(l,new d(i,y));y++)f+=1;f>1&&(r[c]=new h(i,o,f,a))}(u>1||f>1)&&(c+=1)}}return{ac:n,dn:r}}(e.h,e.v,x);if(null!=l)for(var S=0,j=Object.entries(E[l.direction]);S<j.length;S++){var O=j[S],A=O[0],D=O[1],N=e.clues[D.direction][A],q=N[0],z=N[1],I=N[2],J=new f(A,D.direction,q,z,I);D.equals(l)&&!J.equals(i)&&u(J)}function F(e,t){console.log("crossword onClick() "+t+" "+e);var l=E[t][e];c(l),C(new d(l.x,l.y))}return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,e.title),r.a.createElement("p",null,e.preamble),r.a.createElement(m,{clue:i}),r.a.createElement("div",{style:{margin:"5px"},id:"xwd-container"},r.a.createElement(w,{blackCells:e.blackCells,whiteCells:x,cells:b,h:e.h,v:e.h,clues:E,selectedClue:l,setSelectedClue:c,selectedCell:y,setSelectedCell:C})),r.a.createElement(k,{direction:s,clues:e.clues.ac,onClick:F,selectedClue:i}),r.a.createElement(k,{direction:a,clues:e.clues.dn,onClick:F,selectedClue:i}))}function w(e){for(var t={},l=0,n=Object.entries(e.clues.ac);l<n.length;l++){var c=n[l],o=c[0],i=c[1];t[o]=new d(i.x,i.y)}for(var u=0,h=Object.entries(e.clues.dn);u<h.length;u++){var f=h[u],v=f[0],C=f[1];t[v]=new d(C.x,C.y)}function m(t){if(console.log("just clicked"),console.log(t),!(t.x<0||t.x>=e.h||t.y<0||t.y>=e.v||function(t){for(var l=0;l<e.blackCells.length;l++){var n=e.blackCells[l];if(t.x===n.x&&t.y===n.y)return!0}return!1}(t))){e.setSelectedCell(t);for(var l,n=!1,r=y(e.whiteCells);!(l=r()).done;){var c=l.value;t.equals(c)&&(n=!0)}if(n){for(var o=null,i=null,s=0,a=Object.values(e.clues.ac);s<a.length;s++){var u=a[s];if(g(u,t)){if(o=u,e.selectedClue&&!e.selectedClue.equals(o))return console.log("setiting selected clue to"),console.log(o),void e.setSelectedClue(o);break}}for(var d=0,h=Object.values(e.clues.dn);d<h.length;d++){var f=h[d];if(g(f,t))return i=f,console.log("setiting selected clue to"),console.log(i),void e.setSelectedClue(i)}}}}function b(t){void 0===t&&(t=!0);var l=e.selectedCell,n=l.x,r=l.y;e.selectedClue.direction===s&&(t&&n!==e.selectedClue.x+e.selectedClue.length-1?e.setSelectedCell(new d(n+1,r)):t||n===e.selectedClue.x||e.setSelectedCell(new d(n-1,r))),e.selectedClue.direction===a&&(t&&r!==e.selectedClue.y+e.selectedClue.length-1?e.setSelectedCell(new d(n,r+1)):t||r===e.selectedClue.y||e.setSelectedCell(new d(n,r-1)))}function w(t){"up"===t?m(e.selectedCell.nextCell(a,!1)):"down"===t?m(e.selectedCell.nextCell(a,!0)):"left"===t?m(e.selectedCell.nextCell(s,!1)):"right"===t&&m(e.selectedCell.nextCell(s,!0))}function k(){console.log("select next clue"),console.log(e.selectedClue.direction);var t=Object.values(e.clues[e.selectedClue.direction]),l=e.selectedClue.direction===s?a:s,n=Object.values(e.clues[l]);console.log(l);for(var r=0;r<t.length;r++)if(console.log("sel"),console.log(e.selectedClue),console.log("iter"),console.log(t[r]),e.selectedClue.equals(t[r])){var c=void 0;r!==t.length-1?(console.log("setting 1"),c=t[r+1]):(console.log("setting 2"),c=n[0]),e.setSelectedClue(c);var o=new d(c.x,c.y);e.setSelectedCell(o);break}}var E=[];if(null!=e.selectedClue){var S=e.selectedClue,j=S.x,O=S.y,A=S.length,D=S.direction;if(console.log(j),console.log(O),console.log(A),console.log(D),D==s)for(var N=j;N<j+A;N++)E.push(new d(N,O));else for(var q=O;q<O+A;q++)E.push(new d(j,q))}console.log(t),console.log("highlights"),console.log(E);for(var z=0;z<e.cells.length;z++){for(var I=e.cells[z],J=I[0],F=I[1],M=null,R=0,U=Object.entries(t);R<U.length;R++){var W=U[R],_=W[0],B=W[1];B.x===J&&B.y===F&&(M=_)}e.cells[z].push(M);for(var T=!1,$=0;$<E.length;$++)J===E[$].x&&F===E[$].y&&(T=!0);e.cells[z].push(T)}return console.log(e.cells),r.a.createElement("div",{style:{position:"relative",width:30*e.h+"px",height:30*e.v+"px"}},e.cells.map((function(t){var l=t[0],n=t[1],c=t[2],o=t[3],i=t[4];return c?r.a.createElement(p,{h:30,v:30,x:30*l,y:30*n,key:l+e.h*n}):r.a.createElement(x,{h:30,v:30,x:30*l,y:30*n,key:l+e.h*n,number:o,highlight:i,selected:null!==e.selectedCell&&l===e.selectedCell.x&&n===e.selectedCell.y,onClick:function(e){return m(new d(l,n))},selectNextCell:b,selectNextClue:k,moveCell:w})})))}function k(e){var t=null,l=null;return null!==e.selectedClue&&(t=e.selectedClue.num,l=e.selectedClue.direction),r.a.createElement("div",{style:{fontWeight:"bold",width:"300px",display:"inline-block",verticalAlign:"top",margin:"5px"}},r.a.createElement("div",{style:{border:"1px solid black",padding:"5px"}},u[e.direction]),Object.entries(e.clues).map((function(n){var c=n[0],o=n[1],i=e.direction===l&&c===t,s=o[0],a=o[1],u=o[2],d=new Date,h=11===d.getMonth()&&d.getDate()>u?s:"Released on December "+u+".";return r.a.createElement(E,{number:c,clue:h,len:a,onClick:function(){!function(t){e.onClick(t,e.direction)}(c)},selected:i})})))}function E(e){var t="clue";return e.selected&&(t+=" selected"),r.a.createElement("div",{className:t,onClick:e.onClick},e.number,". ",e.clue," (",e.len,")")}t.default=function(){var e=Object(c.useStaticQuery)("2069107878").allXwd2020Json.edges[0].node,t=e.title,l=e.preamble,n=e.across_size,s=e.down_size,a=e.black_squares,u=e.clues,h={ac:{},dn:{}};u.ac.forEach((function(e){h.ac[e.number]=[e.clue,e.length,e.date]})),u.dn.forEach((function(e){h.dn[e.number]=[e.clue,e.length,e.date]}));var f=a.map((function(e){var t=e[0],l=e[1];return new d(t,l)}));return r.a.createElement(o.a,null,r.a.createElement(i.a,{title:"Crosswords",keywords:["gatsby","application","react"]}),r.a.createElement(b,{title:t,preamble:l,blackCells:f,h:n,v:s,clues:h}))}}}]);
//# sourceMappingURL=component---src-pages-xwd-tsx-6179aa1942429a97acf1.js.map