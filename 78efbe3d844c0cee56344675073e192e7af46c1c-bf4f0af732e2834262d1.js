/*! For license information please see 78efbe3d844c0cee56344675073e192e7af46c1c-bf4f0af732e2834262d1.js.LICENSE.txt */
"use strict";(self.webpackChunkxwds=self.webpackChunkxwds||[]).push([[304],{2729:function(e){const t=/[\p{Lu}]/u,r=/[\p{Ll}]/u,n=/^[\p{Lu}](?![\p{Lu}])/gu,s=/([\p{Alpha}\p{N}_]|$)/u,l=/[_.\- ]+/,o=new RegExp("^"+l.source),i=new RegExp(l.source+s.source,"gu"),a=new RegExp("\\d+"+s.source,"gu"),c=(e,s)=>{if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");if(s={pascalCase:!1,preserveConsecutiveUppercase:!1,...s},0===(e=Array.isArray(e)?e.map((e=>e.trim())).filter((e=>e.length)).join("-"):e.trim()).length)return"";const l=!1===s.locale?e=>e.toLowerCase():e=>e.toLocaleLowerCase(s.locale),c=!1===s.locale?e=>e.toUpperCase():e=>e.toLocaleUpperCase(s.locale);if(1===e.length)return s.pascalCase?c(e):l(e);return e!==l(e)&&(e=((e,n,s)=>{let l=!1,o=!1,i=!1;for(let a=0;a<e.length;a++){const c=e[a];l&&t.test(c)?(e=e.slice(0,a)+"-"+e.slice(a),l=!1,i=o,o=!0,a++):o&&i&&r.test(c)?(e=e.slice(0,a-1)+"-"+e.slice(a-1),i=o,o=!1,l=!0):(l=n(c)===c&&s(c)!==c,i=o,o=s(c)===c&&n(c)!==c)}return e})(e,l,c)),e=e.replace(o,""),e=s.preserveConsecutiveUppercase?((e,t)=>(n.lastIndex=0,e.replace(n,(e=>t(e)))))(e,l):l(e),s.pascalCase&&(e=c(e.charAt(0))+e.slice(1)),((e,t)=>(i.lastIndex=0,a.lastIndex=0,e.replace(i,((e,r)=>t(r))).replace(a,(e=>t(e)))))(e,c)};e.exports=c,e.exports.default=c},2532:function(e,t,r){r.d(t,{L:function(){return y},M:function(){return C},P:function(){return v},S:function(){return R},_:function(){return i},a:function(){return o},b:function(){return d},g:function(){return u},h:function(){return a}});var n=r(6540),s=(r(2729),r(5556)),l=r.n(s);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function i(e,t){if(null==e)return{};var r,n,s={},l=Object.keys(e);for(n=0;n<l.length;n++)t.indexOf(r=l[n])>=0||(s[r]=e[r]);return s}const a=()=>"undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;function c(e,t,r){const n={};let s="gatsby-image-wrapper";return"fixed"===r?(n.width=e,n.height=t):"constrained"===r&&(s="gatsby-image-wrapper gatsby-image-wrapper-constrained"),{className:s,"data-gatsby-image-wrapper":"",style:n}}function d(e,t,r,n,s){return void 0===s&&(s={}),o({},r,{loading:n,shouldLoad:e,"data-main-image":"",style:o({},s,{opacity:t?1:0})})}function u(e,t,r,n,s,l,i,a){const c={};l&&(c.backgroundColor=l,"fixed"===r?(c.width=n,c.height=s,c.backgroundColor=l,c.position="relative"):("constrained"===r||"fullWidth"===r)&&(c.position="absolute",c.top=0,c.left=0,c.bottom=0,c.right=0)),i&&(c.objectFit=i),a&&(c.objectPosition=a);const d=o({},e,{"aria-hidden":!0,"data-placeholder-image":"",style:o({opacity:t?0:1,transition:"opacity 500ms linear"},c)});return d}const p=["children"],f=function(e){let{layout:t,width:r,height:s}=e;return"fullWidth"===t?n.createElement("div",{"aria-hidden":!0,style:{paddingTop:s/r*100+"%"}}):"constrained"===t?n.createElement("div",{style:{maxWidth:r,display:"block"}},n.createElement("img",{alt:"",role:"presentation","aria-hidden":"true",src:`data:image/svg+xml;charset=utf-8,%3Csvg%20height='${s}'%20width='${r}'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%3E%3C/svg%3E`,style:{maxWidth:"100%",display:"block",position:"static"}})):null},y=function(e){let{children:t}=e,r=i(e,p);return n.createElement(n.Fragment,null,n.createElement(f,o({},r)),t,null)},m=["src","srcSet","loading","alt","shouldLoad"],h=["fallback","sources","shouldLoad"],g=function(e){let{src:t,srcSet:r,loading:s,alt:l="",shouldLoad:a}=e,c=i(e,m);return n.createElement("img",o({},c,{decoding:"async",loading:s,src:a?t:void 0,"data-src":a?void 0:t,srcSet:a?r:void 0,"data-srcset":a?void 0:r,alt:l}))},b=function(e){let{fallback:t,sources:r=[],shouldLoad:s=!0}=e,l=i(e,h);const a=l.sizes||(null==t?void 0:t.sizes),c=n.createElement(g,o({},l,t,{sizes:a,shouldLoad:s}));return r.length?n.createElement("picture",null,r.map((e=>{let{media:t,srcSet:r,type:l}=e;return n.createElement("source",{key:`${t}-${l}-${r}`,type:l,media:t,srcSet:s?r:void 0,"data-srcset":s?void 0:r,sizes:a})})),c):c};var w;g.propTypes={src:s.string.isRequired,alt:s.string.isRequired,sizes:s.string,srcSet:s.string,shouldLoad:s.bool},b.displayName="Picture",b.propTypes={alt:s.string.isRequired,shouldLoad:s.bool,fallback:s.exact({src:s.string.isRequired,srcSet:s.string,sizes:s.string}),sources:s.arrayOf(s.oneOfType([s.exact({media:s.string.isRequired,type:s.string,sizes:s.string,srcSet:s.string.isRequired}),s.exact({media:s.string,type:s.string.isRequired,sizes:s.string,srcSet:s.string.isRequired})]))};const k=["fallback"],v=function(e){let{fallback:t}=e,r=i(e,k);return t?n.createElement(b,o({},r,{fallback:{src:t},"aria-hidden":!0,alt:""})):n.createElement("div",o({},r))};v.displayName="Placeholder",v.propTypes={fallback:s.string,sources:null==(w=b.propTypes)?void 0:w.sources,alt:function(e,t,r){return e[t]?new Error(`Invalid prop \`${t}\` supplied to \`${r}\`. Validation failed.`):null}};const C=function(e){return n.createElement(n.Fragment,null,n.createElement(b,o({},e)),n.createElement("noscript",null,n.createElement(b,o({},e,{shouldLoad:!0}))))};C.displayName="MainImage",C.propTypes=b.propTypes;const E=["as","className","class","style","image","loading","imgClassName","imgStyle","backgroundColor","objectFit","objectPosition"],x=["style","className"],S=e=>e.replace(/\n/g,""),P=function(e,t,r){for(var n=arguments.length,s=new Array(n>3?n-3:0),o=3;o<n;o++)s[o-3]=arguments[o];return e.alt||""===e.alt?l().string.apply(l(),[e,t,r].concat(s)):new Error(`The "alt" prop is required in ${r}. If the image is purely presentational then pass an empty string: e.g. alt="". Learn more: https://a11y-style-guide.com/style-guide/section-media.html`)},O={image:l().object.isRequired,alt:P},$=["as","image","style","backgroundColor","className","class","onStartLoad","onLoad","onError"],N=["style","className"],L=new Set;let j,T;const _=function(e){let{as:t="div",image:s,style:l,backgroundColor:d,className:u,class:p,onStartLoad:f,onLoad:y,onError:m}=e,h=i(e,$);const{width:g,height:b,layout:w}=s,k=c(g,b,w),{style:v,className:C}=k,E=i(k,N),x=(0,n.useRef)(),S=(0,n.useMemo)((()=>JSON.stringify(s.images)),[s.images]);p&&(u=p);const P=function(e,t,r){let n="";return"fullWidth"===e&&(n=`<div aria-hidden="true" style="padding-top: ${r/t*100}%;"></div>`),"constrained"===e&&(n=`<div style="max-width: ${t}px; display: block;"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height='${r}'%20width='${t}'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%3E%3C/svg%3E" style="max-width: 100%; display: block; position: static;"></div>`),n}(w,g,b);return(0,n.useEffect)((()=>{j||(j=r.e(108).then(r.bind(r,1108)).then((e=>{let{renderImageToString:t,swapPlaceholderImage:r}=e;return T=t,{renderImageToString:t,swapPlaceholderImage:r}})));const e=x.current.querySelector("[data-gatsby-image-ssr]");if(e&&a())return e.complete?(null==f||f({wasCached:!0}),null==y||y({wasCached:!0}),setTimeout((()=>{e.removeAttribute("data-gatsby-image-ssr")}),0)):(null==f||f({wasCached:!0}),e.addEventListener("load",(function t(){e.removeEventListener("load",t),null==y||y({wasCached:!0}),setTimeout((()=>{e.removeAttribute("data-gatsby-image-ssr")}),0)}))),void L.add(S);if(T&&L.has(S))return;let t,n;return j.then((e=>{let{renderImageToString:r,swapPlaceholderImage:i}=e;x.current&&(x.current.innerHTML=r(o({isLoading:!0,isLoaded:L.has(S),image:s},h)),L.has(S)||(t=requestAnimationFrame((()=>{x.current&&(n=i(x.current,S,L,l,f,y,m))}))))})),()=>{t&&cancelAnimationFrame(t),n&&n()}}),[s]),(0,n.useLayoutEffect)((()=>{L.has(S)&&T&&(x.current.innerHTML=T(o({isLoading:L.has(S),isLoaded:L.has(S),image:s},h)),null==f||f({wasCached:!0}),null==y||y({wasCached:!0}))}),[s]),(0,n.createElement)(t,o({},E,{style:o({},v,l,{backgroundColor:d}),className:`${C}${u?` ${u}`:""}`,ref:x,dangerouslySetInnerHTML:{__html:P},suppressHydrationWarning:!0}))},A=(0,n.memo)((function(e){return e.image?(0,n.createElement)(_,e):null}));A.propTypes=O,A.displayName="GatsbyImage";const q=["src","__imageData","__error","width","height","aspectRatio","tracedSVGOptions","placeholder","formats","quality","transformOptions","jpgOptions","pngOptions","webpOptions","avifOptions","blurredOptions","breakpoints","outputPixelDensities"];function I(e){return function(t){let{src:r,__imageData:s,__error:l}=t,a=i(t,q);return l&&console.warn(l),s?n.createElement(e,o({image:s},a)):(console.warn("Image not loaded",r),null)}}const M=I((function(e){let{as:t="div",className:r,class:s,style:l,image:a,loading:p="lazy",imgClassName:f,imgStyle:m,backgroundColor:h,objectFit:g,objectPosition:b}=e,w=i(e,E);if(!a)return console.warn("[gatsby-plugin-image] Missing image prop"),null;s&&(r=s),m=o({objectFit:g,objectPosition:b,backgroundColor:h},m);const{width:k,height:P,layout:O,images:$,placeholder:N,backgroundColor:L}=a,j=c(k,P,O),{style:T,className:_}=j,A=i(j,x),q={fallback:void 0,sources:[]};return $.fallback&&(q.fallback=o({},$.fallback,{srcSet:$.fallback.srcSet?S($.fallback.srcSet):void 0})),$.sources&&(q.sources=$.sources.map((e=>o({},e,{srcSet:S(e.srcSet)})))),n.createElement(t,o({},A,{style:o({},T,l,{backgroundColor:h}),className:`${_}${r?` ${r}`:""}`}),n.createElement(y,{layout:O,width:k,height:P},n.createElement(v,o({},u(N,!1,O,k,P,L,g,b))),n.createElement(C,o({"data-gatsby-image-ssr":"",className:f},w,d("eager"===p,!1,q,p,m)))))})),D=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s];return"fullWidth"!==e.layout||"width"!==t&&"height"!==t||!e[t]?l().number.apply(l(),[e,t].concat(n)):new Error(`"${t}" ${e[t]} may not be passed when layout is fullWidth.`)},z=new Set(["fixed","fullWidth","constrained"]),F={src:l().string.isRequired,alt:P,width:D,height:D,sizes:l().string,layout:e=>{if(void 0!==e.layout&&!z.has(e.layout))return new Error(`Invalid value ${e.layout}" provided for prop "layout". Defaulting to "constrained". Valid values are "fixed", "fullWidth" or "constrained".`)}};M.displayName="StaticImage",M.propTypes=F;const R=I(A);R.displayName="StaticImage",R.propTypes=F},7956:function(e,t,r){r.d(t,{A:function(){return U}});var n=r(6540),s=r(88),l=r(7528);const o="ac",i="dn",a={ac:"Across",dn:"Down"};let c=function(){function e(e,t){this.x=e,this.y=t}var t=e.prototype;return t.equals=function(e){return null!==e&&this.x===e.x&&this.y===e.y},t.nextCell=function(t,r){void 0===r&&(r=!0);const n=r?1:-1;return t===o?new e(this.x+n,this.y):new e(this.x,this.y+n)},t.str=function(){return`${this.x},${this.y}`},e}(),d=function(){function e(e,t,r,n){this.x=e,this.y=t,this.length=r,this.direction=n}return e.prototype.equals=function(e){return null!==e&&this.x===e.x&&this.y===e.y&&this.length===e.length&&this.direction===e.direction},e}(),u=function(){function e(e,t,r,n,s){this.num=e,this.direction=t,this.clue=r,this.letters=n,this.releaseDate=s}return e.prototype.equals=function(e){return null!==e&&this.num===e.num&&this.direction===e.direction},e}();function p(e,t){for(var r=0;r<e.length;r++){const{x:n,y:s}=e[r];if(n===t.x&&s===t.y)return!0}return!1}function f(e,t){if(e.direction===o)for(var r=e.x;r<e.x+e.length;r++)if(t.x===r&&t.y===e.y)return!0;if(e.direction===i)for(r=e.y;r<e.y+e.length;r++)if(t.x==e.x&&t.y==r)return!0;return!1}function y(e){return n.createElement("div",{style:{position:"absolute",width:e.h+1+"px",height:e.v+1+"px",top:e.y+"px",left:e.x+"px"},className:"black-cell"})}function m(e){let t=e.selected?"cyan":e.highlight?"lightblue":"lightgray";return n.createElement(n.Fragment,null,n.createElement("div",{style:{position:"absolute",width:e.h-1+"px",height:e.v-1+"px",top:e.y+"px",left:e.x+"px",backgroundColor:t},onClick:e.onClick,className:"white-cell"},e.contents),n.createElement("div",{className:"clue-number",style:{position:"absolute",width:e.h-1+"px",height:e.v-1+"px",top:e.y+"px",left:e.x+2+"px"}},e.number))}function h(e){let t="No clue selected.";if(null!==e.clue){const{num:r,direction:n,clue:s,letters:l,releaseDate:o}=e.clue,i=new Date;t=`${r} ${n}. ${11===i.getMonth()&&i.getDate()>o?s:`Released on December ${o}.`} (${l})`}return n.createElement("div",{style:{padding:"15px"}},n.createElement("span",{style:{fontWeight:"bold",padding:"5px",margin:"5px",backgroundColor:"lightblue"}},t))}function g(e){if(null!=e.selectedClueSeq)for(const[r,n]of Object.entries(e.clues[e.selectedClueSeq.direction])){const[t,s,l]=e.clueSeqs[n.direction][r],o=new u(r,n.direction,t,s,l);n.equals(e.selectedClueSeq)&&!o.equals(e.selectedClue)&&e.setSelectedClue(o)}function t(t,r){console.log(`crossword onClick() ${r} ${t}`);const n=clues[r][t];e.setSelectedClueSeq(n),e.setSelectedCell(new c(n.x,n.y))}return n.createElement(n.Fragment,null,n.createElement("h2",null,e.title),n.createElement("p",null,e.preamble),n.createElement(h,{clue:e.selectedClue}),n.createElement("div",{style:{margin:"5px"},id:"xwd-container"},n.createElement(b,{blackCells:e.blackCells,whiteCells:e.whiteCells,cells:e.cells,h:e.h,v:e.h,clues:e.clues,selectedClue:e.selectedClueSeq,setSelectedClue:e.setSelectedClueSeq,selectedCell:e.selectedCell,setSelectedCell:e.setSelectedCell,filledCells:e.filledCells,setFilledCells:e.setFilledCells,selectNextCell:e.selectNextCell})),n.createElement(w,{direction:o,clues:e.clueSeqs[o],onClick:t,selectedClue:e.selectedClue}),n.createElement(w,{direction:i,clues:e.clueSeqs[i],onClick:t,selectedClue:e.selectedClue}))}function b(e){const t={};for(let[n,i]of Object.entries(e.clues[o]))t[n]=new c(i.x,i.y);for(let[n,o]of Object.entries(e.clues[i]))t[n]=new c(o.x,o.y);function r(t){if(t.x<0||t.x>=e.h||t.y<0||t.y>=e.v)return;if(function(t){for(let r=0;r<e.blackCells.length;r++){const n=e.blackCells[r];if(t.x===n.x&&t.y===n.y)return!0}return!1}(t))return;e.setSelectedCell(t);let r=!1;for(const l of e.whiteCells)t.equals(l)&&(r=!0);if(!r)return;let n=null,s=null;for(let l of Object.values(e.clues[o]))if(f(l,t)){if(n=l,e.selectedClue&&!e.selectedClue.equals(n))return void e.setSelectedClue(n);break}for(let l of Object.values(e.clues[i]))if(f(l,t))return s=l,void e.setSelectedClue(s)}function s(t){"up"===t?r(e.selectedCell.nextCell(i,!1)):"down"===t?r(e.selectedCell.nextCell(i,!0)):"left"===t?r(e.selectedCell.nextCell(o,!1)):"right"===t&&r(e.selectedCell.nextCell(o,!0))}let l=[];if(null!=e.selectedClue){const{x:t,y:r,length:n,direction:s}=e.selectedClue;if(s==o)for(let e=t;e<t+n;e++)l.push(new c(e,r));else for(let e=r;e<r+n;e++)l.push(new c(t,e))}for(let n=0;n<e.cells.length;n++){const[r,s]=e.cells[n];let o=null;for(let[e,n]of Object.entries(t))n.x===r&&n.y===s&&(o=e);e.cells[n].push(o);let i=!1;for(let e=0;e<l.length;e++)r===l[e].x&&s===l[e].y&&(i=!0);e.cells[n].push(i)}return n.createElement("div",{style:{position:"relative",width:28*e.h+"px",height:28*e.v+"px"}},e.cells.map((t=>{let[l,o,i,a,d]=t;return i?n.createElement(y,{h:28,v:28,x:28*l,y:28*o,key:l+e.h*o}):n.createElement(m,{h:28,v:28,x:28*l,y:28*o,key:l+e.h*o,number:a,highlight:d,selected:null!==e.selectedCell&&l===e.selectedCell.x&&o===e.selectedCell.y,onClick:e=>r(new c(l,o)),selectNextCell:e.selectNextCell,selectNextClue:e.selectNextClue,moveCell:s,contents:e.filledCells[`${l},${o}`],setContents:t=>function(t,r,n){const s={...e.filledCells};s[`${t},${r}`]=n,e.setFilledCells(s)}(l,o,t)})})))}function w(e){let t=null,r=null;return null!==e.selectedClue&&(t=e.selectedClue.num,r=e.selectedClue.direction),n.createElement("div",{style:{fontWeight:"bold",width:"300px",display:"inline-block",verticalAlign:"top",margin:"5px"}},n.createElement("div",{style:{border:"1px solid black",padding:"5px"}},a[e.direction]),Object.entries(e.clues).map((s=>{const[l,o]=s,i=e.direction===r&&l===t,[a,c,d]=o,u=new Date,p=10===u.getMonth()&&u.getDate()>d?a:`Released on December ${d}.`;return n.createElement(k,{key:l,number:l,clue:p,len:c,onClick:function(){!function(t){e.onClick(t,e.direction)}(l)},selected:i})})))}function k(e){let t="clue";return e.selected&&(t=`${t} selected`),n.createElement("div",{className:t,onClick:e.onClick},e.number,". ",e.clue," (",e.len,")")}var v=r(2532);const C=e=>n.createElement("div",{id:"keyboard-button",onClick:e.keyboardPressed},n.createElement(v.S,{alt:"keyboard",src:"../images/keyboard.png",__imageData:r(2047)})),E=e=>n.createElement("div",{onClick:()=>e.keyPressed(e.letter),className:"keyboard-key"},e.letter),x=e=>n.createElement("div",{onClick:()=>e.keyPressed("Backspace"),className:"keyboard-key backspace"},"⌫"),S=e=>n.createElement("div",{id:"keyboard"},n.createElement("div",{className:"keyboard-row"},n.createElement(E,{letter:"q",keyPressed:e.keyPressed}),n.createElement(E,{letter:"w",keyPressed:e.keyPressed}),n.createElement(E,{letter:"e",keyPressed:e.keyPressed}),n.createElement(E,{letter:"r",keyPressed:e.keyPressed}),n.createElement(E,{letter:"t",keyPressed:e.keyPressed}),n.createElement(E,{letter:"y",keyPressed:e.keyPressed}),n.createElement(E,{letter:"u",keyPressed:e.keyPressed}),n.createElement(E,{letter:"i",keyPressed:e.keyPressed}),n.createElement(E,{letter:"o",keyPressed:e.keyPressed}),n.createElement(E,{letter:"p",keyPressed:e.keyPressed})),n.createElement("div",{className:"keyboard-row"},n.createElement(E,{letter:"a",keyPressed:e.keyPressed}),n.createElement(E,{letter:"s",keyPressed:e.keyPressed}),n.createElement(E,{letter:"d",keyPressed:e.keyPressed}),n.createElement(E,{letter:"f",keyPressed:e.keyPressed}),n.createElement(E,{letter:"g",keyPressed:e.keyPressed}),n.createElement(E,{letter:"h",keyPressed:e.keyPressed}),n.createElement(E,{letter:"j",keyPressed:e.keyPressed}),n.createElement(E,{letter:"k",keyPressed:e.keyPressed}),n.createElement(E,{letter:"l",keyPressed:e.keyPressed})),n.createElement("div",{className:"keyboard-row"},n.createElement("div",{className:"keyboard-spacer"}),n.createElement(E,{letter:"z",keyPressed:e.keyPressed}),n.createElement(E,{letter:"x",keyPressed:e.keyPressed}),n.createElement(E,{letter:"c",keyPressed:e.keyPressed}),n.createElement(E,{letter:"v",keyPressed:e.keyPressed}),n.createElement(E,{letter:"b",keyPressed:e.keyPressed}),n.createElement(E,{letter:"n",keyPressed:e.keyPressed}),n.createElement(E,{letter:"m",keyPressed:e.keyPressed}),n.createElement(x,{keyPressed:e.keyPressed})));var P,O={};var $=function(){if(P)return O;P=1,O.parse=function(e,r){if("string"!=typeof e)throw new TypeError("argument str must be a string");var n={},s=e.length;if(s<2)return n;var l=r&&r.decode||a,d=0,u=0,p=0;do{if(-1===(u=e.indexOf("=",d)))break;if(-1===(p=e.indexOf(";",d)))p=s;else if(u>p){d=e.lastIndexOf(";",u-1)+1;continue}var f=o(e,d,u),y=i(e,u,f),m=e.slice(f,y);if(!t.call(n,m)){var h=o(e,u+1,p),g=i(e,p,h);34===e.charCodeAt(h)&&34===e.charCodeAt(g-1)&&(h++,g--);var b=e.slice(h,g);n[m]=c(b,l)}d=p+1}while(d<s);return n},O.serialize=function(t,o,i){var a=i&&i.encode||encodeURIComponent;if("function"!=typeof a)throw new TypeError("option encode is invalid");if(!r.test(t))throw new TypeError("argument name is invalid");var c=a(o);if(!n.test(c))throw new TypeError("argument val is invalid");var d=t+"="+c;if(!i)return d;if(null!=i.maxAge){var u=Math.floor(i.maxAge);if(!isFinite(u))throw new TypeError("option maxAge is invalid");d+="; Max-Age="+u}if(i.domain){if(!s.test(i.domain))throw new TypeError("option domain is invalid");d+="; Domain="+i.domain}if(i.path){if(!l.test(i.path))throw new TypeError("option path is invalid");d+="; Path="+i.path}if(i.expires){var p=i.expires;if(!function(t){return"[object Date]"===e.call(t)}(p)||isNaN(p.valueOf()))throw new TypeError("option expires is invalid");d+="; Expires="+p.toUTCString()}i.httpOnly&&(d+="; HttpOnly");i.secure&&(d+="; Secure");i.partitioned&&(d+="; Partitioned");if(i.priority){switch("string"==typeof i.priority?i.priority.toLowerCase():i.priority){case"low":d+="; Priority=Low";break;case"medium":d+="; Priority=Medium";break;case"high":d+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(i.sameSite){switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:d+="; SameSite=Strict";break;case"lax":d+="; SameSite=Lax";break;case"strict":d+="; SameSite=Strict";break;case"none":d+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return d};var e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,r=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,n=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,s=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,l=/^[\u0020-\u003A\u003D-\u007E]*$/;function o(e,t,r){do{var n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<r);return r}function i(e,t,r){for(;t>r;){var n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return r}function a(e){return-1!==e.indexOf("%")?decodeURIComponent(e):e}function c(e,t){try{return t(e)}catch(r){return e}}return O}();function N(e,t={}){const r=function(e){if(e&&"j"===e[0]&&":"===e[1])return e.substr(2);return e}(e);if(!t.doNotParse)try{return JSON.parse(r)}catch(n){}return e}class L{constructor(e,t={}){this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.update=()=>{if(!this.HAS_DOCUMENT_COOKIE)return;const e=this.cookies;this.cookies=$.parse(document.cookie),this._checkChanges(e)};const r="undefined"==typeof document?"":document.cookie;this.cookies=function(e){return"string"==typeof e?$.parse(e):"object"==typeof e&&null!==e?e:{}}(e||r),this.defaultSetOptions=t,this.HAS_DOCUMENT_COOKIE=function(){const e="undefined"==typeof global?void 0:global.TEST_HAS_DOCUMENT_COOKIE;return"boolean"==typeof e?e:"object"==typeof document&&"string"==typeof document.cookie}()}_emitChange(e){for(let t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)}_checkChanges(e){new Set(Object.keys(e).concat(Object.keys(this.cookies))).forEach((t=>{e[t]!==this.cookies[t]&&this._emitChange({name:t,value:N(this.cookies[t])})}))}_startPolling(){this.pollingInterval=setInterval(this.update,300)}_stopPolling(){this.pollingInterval&&clearInterval(this.pollingInterval)}get(e,t={}){return t.doNotUpdate||this.update(),N(this.cookies[e],t)}getAll(e={}){e.doNotUpdate||this.update();const t={};for(let r in this.cookies)t[r]=N(this.cookies[r],e);return t}set(e,t,r){r=r?Object.assign(Object.assign({},this.defaultSetOptions),r):this.defaultSetOptions;const n="string"==typeof t?t:JSON.stringify(t);this.cookies=Object.assign(Object.assign({},this.cookies),{[e]:n}),this.HAS_DOCUMENT_COOKIE&&(document.cookie=$.serialize(e,n,r)),this._emitChange({name:e,value:t,options:r})}remove(e,t){const r=t=Object.assign(Object.assign(Object.assign({},this.defaultSetOptions),t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=Object.assign({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=$.serialize(e,"",r)),this._emitChange({name:e,value:void 0,options:t})}addChangeListener(e){this.changeListeners.push(e),this.HAS_DOCUMENT_COOKIE&&1===this.changeListeners.length&&("object"==typeof window&&"cookieStore"in window?window.cookieStore.addEventListener("change",this.update):this._startPolling())}removeChangeListener(e){const t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1),this.HAS_DOCUMENT_COOKIE&&0===this.changeListeners.length&&("object"==typeof window&&"cookieStore"in window?window.cookieStore.removeEventListener("change",this.update):this._stopPolling())}}const j=n.createContext(new L),{Provider:T,Consumer:_}=j;n.Component;"function"==typeof SuppressedError&&SuppressedError;var A,q={exports:{}},I={};var M,D,z;function F(){return M||(M=1,q.exports=function(){if(A)return I;A=1;var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,l=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,i=e?Symbol.for("react.context"):60110,a=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,u=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,f=e?Symbol.for("react.memo"):60115,y=e?Symbol.for("react.lazy"):60116,m=e?Symbol.for("react.block"):60121,h=e?Symbol.for("react.fundamental"):60117,g=e?Symbol.for("react.responder"):60118,b=e?Symbol.for("react.scope"):60119;function w(e){if("object"==typeof e&&null!==e){var p=e.$$typeof;switch(p){case t:switch(e=e.type){case a:case c:case n:case l:case s:case u:return e;default:switch(e=e&&e.$$typeof){case i:case d:case y:case f:case o:return e;default:return p}}case r:return p}}}function k(e){return w(e)===c}return I.AsyncMode=a,I.ConcurrentMode=c,I.ContextConsumer=i,I.ContextProvider=o,I.Element=t,I.ForwardRef=d,I.Fragment=n,I.Lazy=y,I.Memo=f,I.Portal=r,I.Profiler=l,I.StrictMode=s,I.Suspense=u,I.isAsyncMode=function(e){return k(e)||w(e)===a},I.isConcurrentMode=k,I.isContextConsumer=function(e){return w(e)===i},I.isContextProvider=function(e){return w(e)===o},I.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},I.isForwardRef=function(e){return w(e)===d},I.isFragment=function(e){return w(e)===n},I.isLazy=function(e){return w(e)===y},I.isMemo=function(e){return w(e)===f},I.isPortal=function(e){return w(e)===r},I.isProfiler=function(e){return w(e)===l},I.isStrictMode=function(e){return w(e)===s},I.isSuspense=function(e){return w(e)===u},I.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===n||e===c||e===l||e===s||e===u||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===f||e.$$typeof===o||e.$$typeof===i||e.$$typeof===d||e.$$typeof===h||e.$$typeof===g||e.$$typeof===b||e.$$typeof===m)},I.typeOf=w,I}()),q.exports}!function(){if(z)return D;z=1;var e=F(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(r){return e.isMemo(r)?n:s[r.$$typeof]||t}s[e.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[e.Memo]=n;var o=Object.defineProperty,i=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,u=Object.prototype;D=function e(t,n,s){if("string"!=typeof n){if(u){var p=d(n);p&&p!==u&&e(t,p,s)}var f=i(n);a&&(f=f.concat(a(n)));for(var y=l(t),m=l(n),h=0;h<f.length;++h){var g=f[h];if(!(r[g]||s&&s[g]||m&&m[g]||y&&y[g])){var b=c(n,g);try{o(t,g,b)}catch(w){}}}}return t}}();function R(e,t){const r=(0,n.useContext)(j);if(!r)throw new Error("Missing <CookiesProvider>");const s=Object.assign(Object.assign({},{doNotUpdate:!0}),t),[l,o]=(0,n.useState)((()=>r.getAll(s)));"undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement&&(0,n.useLayoutEffect)((()=>{function t(){const t=r.getAll(s);(function(e,t,r){if(!e)return!0;for(let n of e)if(t[n]!==r[n])return!0;return!1})(e||null,t,l)&&o(t)}return r.addChangeListener(t),()=>{r.removeChangeListener(t)}}),[r,l]);const i=(0,n.useMemo)((()=>r.set.bind(r)),[r]),a=(0,n.useMemo)((()=>r.remove.bind(r)),[r]),c=(0,n.useMemo)((()=>r.update.bind(r)),[r]);return[l,i,a,c]}var U=e=>{const[t,r,a]=R(),{0:u,1:f}=(0,n.useState)(!1),{0:y,1:m}=(0,n.useState)(null),{0:h,1:b}=(0,n.useState)(null),{0:w,1:k}=(0,n.useState)(null),{0:v,1:E}=(0,n.useState)(t.cells||{}),x={ac:{},dn:{}};e.rawClues.ac.forEach((e=>{x.ac[e.number]=[e.clue,e.length,e.date]})),e.rawClues.dn.forEach((e=>{x.dn[e.number]=[e.clue,e.length,e.date]}));const P=e.blackSquares.map((e=>{let[t,r]=e;return new c(t,r)})),[O,$]=function(e,t,r){const n=[],s=[];for(let o=0;o<e;o++)for(let e=0;e<t;e++){let t=!1;for(var l=0;l<r.length;l++){const n=r[l];n.x===o&&n.y===e&&(t=!0)}t||s.push(new c(o,e)),n.push([o,e,t])}return[s,n]}(e.acrossSize,e.downSize,P),N=function(e,t,r){for(var n={},s={},l=1,a=0;a<t;a++)for(var u=0;u<e;u++){var f=0,y=0;if(p(r,new c(u,a))){if(0===u||!p(r,new c(u-1,a))){f=1;for(var m=u+1;m<e&&p(r,new c(m,a));m++)f+=1;f>1&&(n[l]=new d(u,a,f,o))}if(0===a||!p(r,new c(u,a-1))){y=1;for(var h=a+1;h<t&&p(r,new c(u,h));h++)y+=1;y>1&&(s[l]=new d(u,a,y,i))}(f>1||y>1)&&(l+=1)}}return{ac:n,dn:s}}(e.acrossSize,e.downSize,O);function L(e){if(void 0===e&&(e=!0),console.log(`selected cell ${y}`),y&&h){const t=y.x,r=y.y;h.direction===o&&(e&&t!==h.x+h.length-1?m(new c(t+1,r)):e||t===h.x||m(new c(t-1,r))),h.direction===i&&(e&&r!==h.y+h.length-1?m(new c(t,r+1)):e||r===h.y||m(new c(t,r-1)))}}const j=e=>{console.log(`pressed ${e}`);const t="⌫"===e||"Backspace"===e;if(e.match(/^[a-z]$/i)||t){console.log(`selne ${t}`);const n=t?"":e,s=!t,l={...v};y&&(l[y.str()]=n),E(l),r("cells",l,{sameSite:"strict",expires:new Date(9999)}),L(s)}else"Tab"===e?function(){if(null!==h){console.log("select next clue");const e=Object.values(N[h.direction]),t=h.direction===o?i:o,r=Object.values(N[t]);for(let n=0;n<e.length;n++)if(console.log("sel"),console.log(w),console.log("iter"),console.log(e[n]),h.equals(e[n])){let t;n!==e.length-1?(console.log("setting 1"),t=e[n+1]):(console.log("setting 2"),t=r[0]),b(t);const s=new c(t.x,t.y);m(s);break}}}():e="ArrowRight"},T=e=>{e.preventDefault(),e.stopPropagation()},_=e=>{j(e.key),e.preventDefault(),e.stopPropagation()};return(0,n.useEffect)((()=>(document.addEventListener("keydown",T),document.addEventListener("keyup",_),()=>{document.removeEventListener("keydown",T),document.removeEventListener("keyup",_)}))),n.createElement(n.Fragment,null,n.createElement(s.A,null,n.createElement(l.A,{title:"Crosswords",keywords:["gatsby","application","react"]}),n.createElement(g,{title:e.title,preamble:e.preamble,blackCells:P,whiteCells:O,cells:$,h:e.acrossSize,v:e.downSize,clueSeqs:x,clues:N,selectedCell:y,setSelectedCell:m,selectedClue:w,setSelectedClue:k,selectedClueSeq:h,setSelectedClueSeq:b,filledCells:v,setFilledCells:E,selectNextCell:L})),u&&n.createElement(S,{keyPressed:j,hideKeyboardPressed:()=>f(!1)}),n.createElement(C,{keyboardPressed:()=>f(!u)}))}},2047:function(e){e.exports=JSON.parse('{"layout":"constrained","backgroundColor":"#080808","images":{"fallback":{"src":"/xwds/static/7fcbb40b91b2d2fdca809685c8d147da/bf8e1/keyboard.png","srcSet":"/xwds/static/7fcbb40b91b2d2fdca809685c8d147da/914ee/keyboard.png 32w,\\n/xwds/static/7fcbb40b91b2d2fdca809685c8d147da/1c9ce/keyboard.png 64w,\\n/xwds/static/7fcbb40b91b2d2fdca809685c8d147da/bf8e1/keyboard.png 128w","sizes":"(min-width: 128px) 128px, 100vw"},"sources":[{"srcSet":"/xwds/static/7fcbb40b91b2d2fdca809685c8d147da/ef6ff/keyboard.webp 32w,\\n/xwds/static/7fcbb40b91b2d2fdca809685c8d147da/8257c/keyboard.webp 64w,\\n/xwds/static/7fcbb40b91b2d2fdca809685c8d147da/6766a/keyboard.webp 128w","type":"image/webp","sizes":"(min-width: 128px) 128px, 100vw"}]},"width":128,"height":128}')}}]);
//# sourceMappingURL=78efbe3d844c0cee56344675073e192e7af46c1c-bf4f0af732e2834262d1.js.map