{"version":3,"sources":["webpack:///./src/components/xwd_utils.js","webpack:///./src/components/xwd.js","webpack:///./src/pages/xwd.tsx"],"names":["AC","DN","DIRNAME","ac","dn","Coord","x","y","this","equals","other","nextCell","direction","forwards","increment","ClueSeq","length","ClueDetails","num","clue","letters","releaseDate","cellInArray","array","cell","k","cellInClue","i","FilledCell","props","style","position","width","h","height","v","top","left","className","EmptyCell","useState","contents","setContents","backgroundColor","selected","highlight","ref","input","focus","onClick","type","onKeyUp","event","console","log","key","match","selectNextCell","selectNextClue","moveCell","value","number","CurrentClue","text","now","Date","getMonth","getDate","padding","fontWeight","margin","Crossword","selectedClueSeq","setSelectedClueSeq","selectedClue","setSelectedClue","selectedCell","setSelectedCell","blackCells","cells","whiteCells","j","blackCell","bCell","push","getWhiteCells","clues","acSquares","dnSquares","whiteSquares","acrossClues","downClues","clueNumber","acrossCount","downCount","l","figureOutClues","Object","entries","clueSeq","date","clueDets","crosswordOnClick","dir","clickedClue","title","preamble","id","Grid","ClueBox","clueCells","doHighlight","justClicked","cellIsBlack","matched","acHighlighted","dnHighlighted","values","dirClues","otherDirection","otherDirClues","newClue","coord","highlightedCells","map","e","display","verticalAlign","border","entry","vals","clueText","len","Clue","clueBoxOnClick","classNames","CrosswordPage","xwdData","useStaticQuery","allXwd2020Json","edges","node","acrossSize","across_size","downSize","down_size","blackSquares","black_squares","rawClues","forEach","element","keywords"],"mappings":"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","file":"component---src-pages-xwd-tsx-6179aa1942429a97acf1.js","sourcesContent":["export const AC = \"ac\";\nexport const DN = \"dn\";\nexport const UP = \"up\";\nexport const DOWN = \"down\";\nexport const LEFT = \"left\";\nexport const RIGHT = \"right\";\nexport const DIRNAME = { ac: \"Across\", dn: \"Down\" };\n\nexport class Coord {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n  equals(other) {\n    return other !== null && this.x === other.x && this.y === other.y;\n  }\n  nextCell(direction, forwards = true) {\n    const increment = forwards ? 1 : -1;\n    if (direction === AC) {\n      return new Coord(this.x + increment, this.y);\n    } else {\n      return new Coord(this.x, this.y + increment);\n    }\n  }\n}\n\nexport class ClueSeq {\n  constructor(x, y, length, direction) {\n    this.x = x;\n    this.y = y;\n    this.length = length;\n    this.direction = direction;\n  }\n  equals(other) {\n    return (\n      other !== null &&\n      this.x === other.x &&\n      this.y === other.y &&\n      this.length === other.length &&\n      this.direction === other.direction\n    );\n  }\n}\n\nexport class ClueDetails {\n  constructor(num, direction, clue, letters, releaseDate) {\n    this.num = num;\n    this.direction = direction;\n    this.clue = clue;\n    this.letters = letters;\n    this.releaseDate = releaseDate;\n  }\n  equals(other) {\n    return (\n      other !== null &&\n      this.num === other.num &&\n      this.direction === other.direction\n    );\n  }\n}\n\nexport function cellInArray(array, cell) {\n  for (var k = 0; k < array.length; k++) {\n    const { x, y } = array[k];\n    if (x === cell.x && y === cell.y) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function cellInClue(clue, cell) {\n  if (clue.direction === AC) {\n    for (var i = clue.x; i < clue.x + clue.length; i++) {\n      if (cell.x === i && cell.y === clue.y) {\n        return true;\n      }\n    }\n  }\n  if (clue.direction === DN) {\n    for (var i = clue.y; i < clue.y + clue.length; i++) {\n      if (cell.x == clue.x && cell.y == i) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nexport function getWhiteCells(h, v, blackCells) {\n  const cells = [];\n  const whiteCells = [];\n  /* Make array of white cells. */\n  for (let i = 0; i < h; i++) {\n    for (let j = 0; j < v; j++) {\n      let blackCell = false;\n      for (var k = 0; k < blackCells.length; k++) {\n        const bCell = blackCells[k];\n        if (bCell.x === i && bCell.y === j) {\n          blackCell = true;\n        }\n      }\n      if (!blackCell) {\n        whiteCells.push(new Coord(i, j));\n      }\n      cells.push([i, j, blackCell]);\n    }\n  }\n  return [whiteCells, cells];\n}\n\nexport function figureOutClues(acSquares, dnSquares, whiteSquares) {\n  /* Collect clues and write in numbers */\n  var acrossClues = [];\n  var downClues = [];\n  var clueNumber = 1;\n  /* loop from right to left then top to bottom */\n  for (var j = 0; j < dnSquares; j++) {\n    for (var i = 0; i < acSquares; i++) {\n      var cell = new Coord(i, j);\n      var acrossCount = 0;\n      var downCount = 0;\n      if (cellInArray(whiteSquares, cell)) {\n        /* Start of across clue */\n        if (i === 0 || !cellInArray(whiteSquares, new Coord(i - 1, j))) {\n          acrossCount = 1;\n          for (var k = i + 1; k < acSquares; k++) {\n            if (cellInArray(whiteSquares, new Coord(k, j))) {\n              acrossCount += 1;\n            } else {\n              break;\n            }\n          }\n          if (acrossCount > 1) {\n            acrossClues[clueNumber] = new ClueSeq(i, j, acrossCount, AC);\n          }\n        }\n        /* Start of down clue */\n        if (j === 0 || !cellInArray(whiteSquares, new Coord(i, j - 1))) {\n          downCount = 1;\n          for (var l = j + 1; l < dnSquares; l++) {\n            if (cellInArray(whiteSquares, new Coord(i, l))) {\n              downCount += 1;\n            } else {\n              break;\n            }\n          }\n          if (downCount > 1) {\n            downClues[clueNumber] = new ClueSeq(i, j, downCount, DN);\n          }\n        }\n        if (acrossCount > 1 || downCount > 1) {\n          clueNumber += 1;\n        }\n      }\n    }\n  }\n  return {\n    ac: acrossClues,\n    dn: downClues\n  };\n}\n","import React, { useState } from \"react\";\nimport {\n  AC,\n  DN,\n  UP,\n  DOWN,\n  LEFT,\n  RIGHT,\n  DIRNAME,\n  Coord,\n  cellInClue,\n  figureOutClues,\n  getWhiteCells,\n  ClueDetails,\n} from \"./xwd_utils\";\n\nexport function FilledCell(props) {\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        width: props.h + 1 + \"px\",\n        height: props.v + 1 + \"px\",\n        top: props.y + \"px\",\n        left: props.x + \"px\",\n      }}\n      className=\"black-cell\"\n    ></div>\n  );\n}\nexport function EmptyCell(props) {\n  const [contents, setContents] = useState(\"\");\n  const handleKeyUp = (event) => {\n    console.log(\"pressed \" + event.key);\n    if (event.key.match(/^[a-z]$/i)) {\n      setContents(event.key);\n      props.selectNextCell();\n    } else if (event.key === \"Backspace\") {\n      setContents(\"\");\n      props.selectNextCell(false);\n    } else if (event.key === \"Delete\") {\n      setContents(\"\");\n    } else if (event.key === \"Tab\") {\n      props.selectNextClue();\n    } else if (event.key === \"ArrowUp\") {\n      props.moveCell(UP);\n    } else if (event.key === \"ArrowDown\") {\n      props.moveCell(DOWN);\n    } else if (event.key === \"ArrowLeft\") {\n      props.moveCell(LEFT);\n    } else if (event.key === \"ArrowRight\") {\n      props.moveCell(RIGHT);\n    }\n  };\n  let backgroundColor = props.selected\n    ? \"cyan\"\n    : props.highlight\n    ? \"lightblue\"\n    : \"lightgray\";\n\n  return (\n    <>\n      <input\n        style={{\n          position: \"absolute\",\n          width: props.h - 1 + \"px\",\n          height: props.v - 1 + \"px\",\n          top: props.y + \"px\",\n          left: props.x + \"px\",\n          backgroundColor: backgroundColor,\n        }}\n        ref={(input) => input && props.selected && input.focus()}\n        onClick={props.onClick}\n        className=\"white-cell\"\n        type=\"text\"\n        onKeyUp={handleKeyUp}\n        value={contents}\n      ></input>\n      <div\n        className=\"clue-number\"\n        style={{\n          position: \"absolute\",\n          width: props.h - 1 + \"px\",\n          height: props.v - 1 + \"px\",\n          top: props.y + \"px\",\n          left: props.x + 2 + \"px\",\n        }}\n      >\n        {props.number}\n      </div>\n    </>\n  );\n}\n\nexport function CurrentClue(props) {\n  let text = \"No clue selected.\";\n  if (props.clue !== null) {\n    const { num, direction, clue, letters, releaseDate } = props.clue;\n    const now = new Date();\n    const words =\n      now.getMonth() === 11 && now.getDate() > releaseDate\n        ? clue\n        : `Released on December ${releaseDate}.`;\n    text = `${num} ${direction}. ${words} (${letters})`;\n  }\n  return (\n    <div style={{ padding: \"15px\" }}>\n      <span\n        style={{\n          fontWeight: \"bold\",\n          padding: \"5px\",\n          margin: \"5px\",\n          backgroundColor: \"lightblue\",\n        }}\n      >\n        {text}\n      </span>\n    </div>\n  );\n}\n\nexport function Crossword(props) {\n  // a ClueSeq\n  const [selectedClueSeq, setSelectedClueSeq] = useState(null);\n  // a ClueDetails\n  const [selectedClue, setSelectedClue] = useState(null);\n  // a Coord\n  const [selectedCell, setSelectedCell] = useState(null);\n  const [whiteCells, cells] = getWhiteCells(props.v, props.h, props.blackCells);\n  // different to props.clues\n  const clues = figureOutClues(props.h, props.v, whiteCells);\n  if (selectedClueSeq != null) {\n    for (const [num, clueSeq] of Object.entries(\n      clues[selectedClueSeq.direction]\n    )) {\n      const [clue, letters, date] = props.clues[clueSeq.direction][num];\n      const clueDets = new ClueDetails(\n        num,\n        clueSeq.direction,\n        clue,\n        letters,\n        date\n      );\n      if (clueSeq.equals(selectedClueSeq) && !clueDets.equals(selectedClue)) {\n        setSelectedClue(clueDets);\n      }\n    }\n  }\n  function crosswordOnClick(num, dir) {\n    console.log(`crossword onClick() ${dir} ${num}`);\n    const clickedClue = clues[dir][num];\n    setSelectedClueSeq(clickedClue);\n    setSelectedCell(new Coord(clickedClue.x, clickedClue.y));\n  }\n  return (\n    <>\n      <h1>{props.title}</h1>\n      <p>{props.preamble}</p>\n      <CurrentClue clue={selectedClue}></CurrentClue>\n      <div style={{ margin: \"5px\" }} id=\"xwd-container\">\n        <Grid\n          blackCells={props.blackCells}\n          whiteCells={whiteCells}\n          cells={cells}\n          h={props.h}\n          v={props.h}\n          clues={clues}\n          selectedClue={selectedClueSeq}\n          setSelectedClue={setSelectedClueSeq}\n          selectedCell={selectedCell}\n          setSelectedCell={setSelectedCell}\n        ></Grid>\n      </div>\n      <ClueBox\n        direction={AC}\n        clues={props.clues[AC]}\n        onClick={crosswordOnClick}\n        selectedClue={selectedClue}\n      />\n      <ClueBox\n        direction={DN}\n        clues={props.clues[DN]}\n        onClick={crosswordOnClick}\n        selectedClue={selectedClue}\n      />\n    </>\n  );\n}\n\nexport function Grid(props) {\n  const cellHeight = 30;\n  const cellWidth = 30;\n\n  function cellIsBlack(cell) {\n    for (let i = 0; i < props.blackCells.length; i++) {\n      const blackCell = props.blackCells[i];\n      if (cell.x === blackCell.x && cell.y === blackCell.y) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  const clueCells = {};\n  for (let [key, value] of Object.entries(props.clues[AC])) {\n    clueCells[key] = new Coord(value.x, value.y);\n  }\n  for (let [key, value] of Object.entries(props.clues[DN])) {\n    clueCells[key] = new Coord(value.x, value.y);\n  }\n  function doHighlight(justClicked) {\n    console.log(\"just clicked\");\n    console.log(justClicked);\n    if (\n      justClicked.x < 0 ||\n      justClicked.x >= props.h ||\n      justClicked.y < 0 ||\n      justClicked.y >= props.v\n    ) {\n      return;\n    }\n    if (cellIsBlack(justClicked)) {\n      return;\n    }\n    props.setSelectedCell(justClicked);\n    let matched = false;\n    for (const cell of props.whiteCells) {\n      if (justClicked.equals(cell)) {\n        matched = true;\n      }\n    }\n    if (!matched) {\n      return;\n    }\n    const highlighted = [];\n    let acHighlighted = null;\n    let dnHighlighted = null;\n    for (let value of Object.values(props.clues[AC])) {\n      if (cellInClue(value, justClicked)) {\n        acHighlighted = value;\n        // If this clue is the highlighted one already carry on.\n        if (props.selectedClue && !props.selectedClue.equals(acHighlighted)) {\n          console.log(\"setiting selected clue to\");\n          console.log(acHighlighted);\n          props.setSelectedClue(acHighlighted);\n          return;\n        } else {\n          break;\n        }\n      }\n    }\n    for (let value of Object.values(props.clues[DN])) {\n      if (cellInClue(value, justClicked)) {\n        dnHighlighted = value;\n        console.log(\"setiting selected clue to\");\n        console.log(dnHighlighted);\n        props.setSelectedClue(dnHighlighted);\n        return;\n      }\n    }\n  }\n\n  function selectNextCell(forwards = true) {\n    const { x, y } = props.selectedCell;\n    if (props.selectedClue.direction === AC) {\n      if (\n        forwards &&\n        x !== props.selectedClue.x + props.selectedClue.length - 1\n      ) {\n        props.setSelectedCell(new Coord(x + 1, y));\n      } else if (!forwards && x !== props.selectedClue.x) {\n        props.setSelectedCell(new Coord(x - 1, y));\n      }\n    }\n    if (props.selectedClue.direction === DN) {\n      if (\n        forwards &&\n        y !== props.selectedClue.y + props.selectedClue.length - 1\n      ) {\n        props.setSelectedCell(new Coord(x, y + 1));\n      } else if (!forwards && y !== props.selectedClue.y) {\n        props.setSelectedCell(new Coord(x, y - 1));\n      }\n    }\n  }\n\n  function moveCell(direction) {\n    if (direction === UP) {\n      doHighlight(props.selectedCell.nextCell(DN, false));\n    } else if (direction === DOWN) {\n      doHighlight(props.selectedCell.nextCell(DN, true));\n    } else if (direction === LEFT) {\n      doHighlight(props.selectedCell.nextCell(AC, false));\n    } else if (direction === RIGHT) {\n      doHighlight(props.selectedCell.nextCell(AC, true));\n    }\n  }\n\n  function selectNextClue() {\n    console.log(\"select next clue\");\n    console.log(props.selectedClue.direction);\n    const dirClues = Object.values(props.clues[props.selectedClue.direction]);\n    const otherDirection = props.selectedClue.direction === AC ? DN : AC;\n    const otherDirClues = Object.values(props.clues[otherDirection]);\n    console.log(otherDirection);\n\n    for (let i = 0; i < dirClues.length; i++) {\n      console.log(\"sel\");\n      console.log(props.selectedClue);\n      console.log(\"iter\");\n      console.log(dirClues[i]);\n      if (props.selectedClue.equals(dirClues[i])) {\n        let newClue;\n        if (i !== dirClues.length - 1) {\n          console.log(\"setting 1\");\n          newClue = dirClues[i + 1];\n        } else {\n          console.log(\"setting 2\");\n          newClue = otherDirClues[0];\n        }\n        props.setSelectedClue(newClue);\n        const coord = new Coord(newClue.x, newClue.y);\n        props.setSelectedCell(coord);\n        break;\n      }\n    }\n  }\n\n  let highlightedCells = [];\n  if (props.selectedClue != null) {\n    const { x, y, length, direction } = props.selectedClue;\n    console.log(x);\n    console.log(y);\n    console.log(length);\n    console.log(direction);\n    if (direction == AC) {\n      for (let i = x; i < x + length; i++) {\n        highlightedCells.push(new Coord(i, y));\n      }\n    } else {\n      for (let i = y; i < y + length; i++) {\n        highlightedCells.push(new Coord(x, i));\n      }\n    }\n  }\n\n  console.log(clueCells);\n  console.log(\"highlights\");\n  console.log(highlightedCells);\n  for (let k = 0; k < props.cells.length; k++) {\n    const [x, y] = props.cells[k];\n    let number = null;\n    for (let [key, value] of Object.entries(clueCells)) {\n      if (value.x === x && value.y === y) {\n        number = key;\n      }\n    }\n    props.cells[k].push(number);\n    let highlight = false;\n    for (let l = 0; l < highlightedCells.length; l++) {\n      if (x === highlightedCells[l].x && y === highlightedCells[l].y) {\n        highlight = true;\n      }\n    }\n    props.cells[k].push(highlight);\n  }\n  console.log(props.cells);\n  return (\n    <div\n      style={{\n        position: \"relative\",\n        width: props.h * cellWidth + \"px\",\n        height: props.v * cellHeight + \"px\",\n      }}\n    >\n      {props.cells.map(([i, j, blackCell, number, highlight]) => {\n        if (blackCell) {\n          return (\n            <FilledCell\n              h={cellWidth}\n              v={cellHeight}\n              x={i * cellWidth}\n              y={j * cellHeight}\n              key={i + props.h * j}\n            />\n          );\n        } else {\n          return (\n            <EmptyCell\n              h={cellWidth}\n              v={cellHeight}\n              x={i * cellWidth}\n              y={j * cellHeight}\n              key={i + props.h * j}\n              number={number}\n              highlight={highlight}\n              selected={\n                props.selectedCell !== null &&\n                i === props.selectedCell.x &&\n                j === props.selectedCell.y\n              }\n              onClick={(e) => doHighlight(new Coord(i, j))}\n              selectNextCell={selectNextCell}\n              selectNextClue={selectNextClue}\n              moveCell={moveCell}\n            />\n          );\n        }\n      })}\n    </div>\n  );\n}\n\nexport function ClueBox(props) {\n  function clueBoxOnClick(number) {\n    props.onClick(number, props.direction);\n  }\n  let num = null;\n  let direction = null;\n  if (props.selectedClue !== null) {\n    num = props.selectedClue.num;\n    direction = props.selectedClue.direction;\n  }\n  return (\n    <div\n      style={{\n        fontWeight: \"bold\",\n        width: \"300px\",\n        display: \"inline-block\",\n        verticalAlign: \"top\",\n        margin: \"5px\",\n      }}\n    >\n      <div style={{ border: \"1px solid black\", padding: \"5px\" }}>\n        {DIRNAME[props.direction]}\n      </div>\n      {Object.entries(props.clues).map((entry) => {\n        const [number, vals] = entry;\n        const selected = props.direction === direction && number === num;\n        const [clueText, len, releaseDate] = vals;\n\n        const now = new Date();\n        const text =\n          now.getMonth() === 11 && now.getDate() > releaseDate\n            ? clueText\n            : `Released on December ${releaseDate}.`;\n        function onClick() {\n          clueBoxOnClick(number);\n        }\n        return (\n          <Clue\n            number={number}\n            clue={text}\n            len={len}\n            onClick={onClick}\n            selected={selected}\n          />\n        );\n      })}\n    </div>\n  );\n}\n\nexport function Clue(props) {\n  let classNames = \"clue\";\n  if (props.selected) {\n    classNames = `${classNames} selected`;\n  }\n  return (\n    <div className={classNames} onClick={props.onClick}>\n      {props.number}. {props.clue} ({props.len})\n    </div>\n  );\n}\n","import React from \"react\";\nimport { graphql, useStaticQuery } from \"gatsby\";\n\nimport Layout from \"../components/layout\";\nimport SEO from \"../components/seo\";\nimport { Crossword } from \"../components/xwd\";\nimport { Coord } from \"../components/xwd_utils\";\n\nconst CrosswordPage = (): JSX.Element => {\n  const data = useStaticQuery(graphql`\n    query XwdQuery {\n      allXwd2020Json {\n        edges {\n          node {\n            title\n            preamble\n            across_size\n            down_size\n            black_squares\n            clues {\n              ac {\n                number\n                clue\n                length\n                date\n              }\n              dn {\n                number\n                clue\n                length\n                date\n              }\n            }\n          }\n        }\n      }\n    }\n  `);\n  const xwdData = data.allXwd2020Json.edges[0].node;\n  const title = xwdData.title;\n  const preamble = xwdData.preamble;\n  const acrossSize = xwdData.across_size;\n  const downSize = xwdData.down_size;\n  const blackSquares = xwdData.black_squares;\n  const rawClues = xwdData.clues;\n  const clues = { ac: {}, dn: {} };\n  rawClues.ac.forEach((element) => {\n    clues.ac[element.number] = [element.clue, element.length, element.date];\n  });\n  rawClues.dn.forEach((element) => {\n    clues.dn[element.number] = [element.clue, element.length, element.date];\n  });\n\n  const blackCells = blackSquares.map(([x, y]) => new Coord(x, y));\n  return (\n    <Layout>\n      <SEO title=\"Crosswords\" keywords={[`gatsby`, `application`, `react`]} />\n      <Crossword\n        title={title}\n        preamble={preamble}\n        blackCells={blackCells}\n        h={acrossSize}\n        v={downSize}\n        clues={clues}\n      />\n    </Layout>\n  );\n};\n\nexport default CrosswordPage;\n"],"sourceRoot":""}